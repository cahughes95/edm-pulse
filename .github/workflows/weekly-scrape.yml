name: weekly-scrape
on:
  schedule:
    - cron: "0 17 * * MON"   # ~09:00 Los Angeles during Standard Time
  workflow_dispatch: {}
jobs:
  run:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with: { python-version: "3.11" }
      - name: Install deps
        run: pip install -r requirements.txt
      - name: Scrape & load
        env:
          DATABASE_URL: ${{ secrets.DATABASE_URL }}
          LA_URL: https://19hz.info/eventlisting_LosAngeles.php
          USER_AGENT: EDM-Pulse-Scraper/0.1 (contact: you@example.com)
        run: python -m src.runners.run_weekly_events
